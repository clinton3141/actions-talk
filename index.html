<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>GitHub Actions talk</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.0.5/reset.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.0.5/reveal.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.0.5/theme/blood.min.css"
    />
    <link
      rel="stylesheet"
      href="https://storage.googleapis.com/app.klipse.tech/css/codemirror.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.0.5/plugin/highlight/monokai.min.css"
    />
    <style>
      /* Position computations of klipse get confused by reveal.js's scaling.
       Hence, scaling should be disabled with this code.  Fix height of code area
       with scrollbar (use overflow instead of overflow-y to restore CodeMirror
       setting afterwards): */
      .reveal section pre {
        max-height: 70vh;
        height: auto;
        overflow: auto;
      }

      /* Reset some reveal.js and oer-reveal settings: */
      .reveal section pre .CodeMirror pre {
        font-size: 2em;
        box-shadow: none;
        width: auto;
        padding: 0.4em;
        display: block;
        overflow: visible;
      }

      /* Enlarge cursor: */
      .CodeMirror-cursor {
        border-left: 3px solid black;
      }

      .cm-s-default {
        font-size: 1em;
        line-height: 1.5em;
        font-family: inconsolata, monospace;
        letter-spacing: 0.3px;
        word-spacing: 1px;
        background: #272822;
        color: #f8f8f2;
      }

      .cm-s-default .CodeMirror-lines {
        padding: 8px 0;
      }

      .cm-s-default .CodeMirror-gutters {
        box-shadow: 1px 0 2px 0 rgba(0, 0, 0, 0.5);
        -webkit-box-shadow: 1px 0 2px 0 rgba(0, 0, 0, 0.5);
        background-color: #272822;
        padding-right: 10px;
        z-index: 3;
        border: none;
      }

      .cm-s-default div.CodeMirror-cursor {
        border-left: 3px solid #f8f8f2;
      }

      .cm-s-default .CodeMirror-activeline-background {
        background: #49483e;
      }

      .cm-s-default .CodeMirror-selected {
        background: #49483e;
      }

      .cm-s-default .cm-comment {
        color: #75715e;
      }

      .cm-s-default .cm-string {
        color: #e6db74;
      }

      .cm-s-default .cm-number {
        color: #66d9ef;
      }

      .cm-s-default .cm-atom {
        color: #66d9ef;
      }

      .cm-s-default .cm-keyword {
        color: #f92672;
      }

      .cm-s-default .cm-variable {
        color: #a6e22e;
      }

      .cm-s-default .cm-def {
        font-style: italic;
        color: #fd971f;
      }

      .cm-s-default .cm-variable-2 {
        color: #f92672;
      }

      .cm-s-default .cm-property {
        color: #66d9ef;
      }

      .cm-s-default .cm-operator {
        color: #f92672;
      }

      .cm-s-default .CodeMirror-linenumber {
        color: #75715e;
      }
    </style>
    <script>
      window.klipse_settings = {
        codemirror_options_in: {
          autoCloseBrackets: true,
        },
        selector: '.language-klipse',
        selector_eval_js: '.language-klipse-js',
      };
    </script>
  </head>

  <body>
    <div class="reveal">
      <div class="slides">
        <section>
          <h1>Hello!</h1>
        </section>
        <section>
          <section>
            <h2>What are GitHub Actions anyway? üßê</h2>
            <ul>
              <li data-fragment-index="1" class="fragment">
                <span>Automated tasks</span>
              </li>
              <li data-fragment-index="2" class="fragment">
                Triggered by events
                <span data-fragment-index="3" class="fragment">
                  <span data-fragment-index="3" class="fragment highlight-red">
                    <span data-fragment-index="4" class="fragment semi-fade-out">
                      push, pull request, cron, and more...
                    </span>
                  </span>
                </span>
              </li>
              <li data-fragment-index="4" class="fragment">
                Fully customisable workflows
                  <span data-fragment-index="7" class="fragment">
                    <span data-fragment-index="7" class="fragment highlight-red">
                      <span data-fragment-index="8" class="fragment semi-fade-out">
                        written by developers
                      </span>
                    </span>
                  </span>
              </li>
            </ul>
          </section>
          <section>
            <h2>Anatomy of<br/>an action üî¨</h2>
            <p>Written in YAML and comprises of:</p>
            <ol>
              <li class="fragment" data-fragment-index="1">
                Options for customising the action, environment and permissions<br />
                <span class="fragment" data-fragment-index="2">
                  <span class="fragment highlight-red" data-fragment-index="2">
                    <span class="fragment semi-fade-out" data-fragment-index="3">
                      name, concurrency, default settings for jobs
                    </span>
                  </span>
                </span>
              </li>
              <li class="fragment" data-fragment-index="3">
                Triggers and configuration<br />
                <span class="fragment" data-fragment-index="4">
                  <span class="fragment highlight-red" data-fragment-index="4">
                    <span class="fragment semi-fade-out" data-fragment-index="5">
                      branch name, filters, cron timings
                    </span>
                  </span>
                </span>
              </li>
              <li class="fragment" data-fragment-index="5">
                List of jobs with steps to complete their task<br />
                <span class="fragment" data-fragment-index="6">
                  <span class="fragment highlight-red" data-fragment-index="6">
                    <span class="fragment semi-fade-out" data-fragment-index="7">
                      check out code, run scripts, patch databases, ...
                    </span>
                  </span>
                </span>
              </li>
            </ol>
          </section>
          <section>
            <pre class="yaml">
              <code data-line-numbers="|1-3|4-5|6-19|7-12|13-19|" data-trim data-noescape>
name: Hello world
permissions:
  discussions: write
on:
  workflow_dispatch:
jobs:
  job1:
    name: Job 1
    runs-on: ubuntu-latest
    steps:
      - name: Hello world
        run: echo "Hello world"
  job2:
    name: Job 2
    runs-on: ubuntu-latest
    needs: [job1]
    steps:
      - name: foo
        run: echo "bar"
              </code>
            </pre>
          </section>
        </section>
        <section>
          <h2>So what are<br/>they good for?</h2>
          <ul>
            <li data-fragment-index="1" class="fragment">Linting</li>
            <li data-fragment-index="2" class="fragment">Testing</li>
            <li data-fragment-index="3" class="fragment">Building</li>
            <li data-fragment-index="4" class="fragment">Deployment</li>
            <li data-fragment-index="5" class="fragment">Building calculators with terrible UX</li>
          </ul>
        </section>
        <section>
          <section>
            <h2>Let's start simple</h2>
          </section>
          <section>
            <pre class="yaml">
            <code data-line-numbers="|1|2-3|4-11|9-11|" data-trim data-noescape>
              name: Simple Action Calculator
              on:
                workflow_dispatch:
              jobs:
                calculate:
                  runs-on: ubuntu-latest
                  steps:
                    - name: Perform calculation
                      run: |
                        calculation="3 + 4"
                        echo "$calculation = $(( $calculation ))"
            </code>
            </pre>
            <p class="fragment"><a href="https://github.com/clinton3141/inconvenient-calculator/actions/workflows/simple-action-calculator.yml" target="_blank">Go</a></p>
          </section>
        </section>
        <section>
          <section>
            <h2>Time to spice it<br />up a little üå∂Ô∏è</h2>
          </section>
          <section>
            <pre class="yaml">
            <code data-line-numbers="|1|2-17|18-25|2-4|5-8|9-12|13-17|18-19|21-25|" data-trim data-noescape>
              name: Input Calculator
              on:
                workflow_dispatch:
                  inputs:
                    number1:
                      description: 'First number'
                      type: number
                      required: true
                    number2:
                      description: 'Second number'
                      type: number
                      required: true
                    operation:
                      description: 'Operation'
                      type: choice
                      options: ['+', '*']
                      required: true
              jobs:
                calculate:
                  runs-on: ubuntu-latest
                  steps:
                    - name: Perform calculation
                      run: |
                        calculation="${{ inputs.number1 }} ${{ inputs.operation }} ${{ inputs.number2 }}"
                        echo "$calculation = $(( calculation ))
            </code>
          </pre>
          <p class="fragment"><a target="_blank" href="https://github.com/clinton3141/inconvenient-calculator/actions/workflows/input-calculator.yml">Go</a></p>
          </section>
        </section>
        <section>
          <section>
            <h2>Now let's start to make it annoying</h2>
          </section>
          <section>
            <pre class="yaml">
              <code data-line-numbers="|1-3|4-8|9-51|2-3|4-7|9-10|10,13-17|18-28|23,24,27|29-31|32,35,36|37-41|42-45|46-53|" data-trim data-noescape>
            name: Push calculator (bc)
            permissions:
              contents: write
            on:
              push:
                branches:
                  - main
              workflow_dispatch:
            jobs:
              get-calculation:
                name: Get calculation
                runs-on: ubuntu-latest
                steps:
                - name: checkout
                  uses: actions/checkout@v4
                  with:
                    repository: clinton3141/inconvenient-calculator
                - name: Read calculation file
                  id: read-calculation
                  run: |
                    if [ -s calculation-simple.txt ]; then
                      echo "There's a calculation to do!"
                      echo "has_calculation=true" >> "$GITHUB_OUTPUT"
                      echo "calculation=$(cat calculation-simple.txt)" >> "$GITHUB_OUTPUT"
                    else
                      echo "nothing to do"
                      echo "has_calculation=false" >> "$GITHUB_OUTPUT"
                    fi
                outputs:
                  has-calculation: ${{ steps.read-calculation.outputs.has_calculation }}
                  calculation: ${{ steps.read-calculation.outputs.calculation }}
              calculate:
                name: Calculate
                runs-on: ubuntu-latest
                needs: [get-calculation]
                if: ${{ needs.get-calculation.outputs.has-calculation == 'true' }}
                steps:
                - name: checkout
                  uses: actions/checkout@v4
                  with:
                    repository: clinton3141/inconvenient-calculator
                - name: do calculation
                  run: |
                    RESULT=$(echo "${{ needs.get-calculation.outputs.calculation }}" | bc)
                    echo $RESULT > results/${{ github.actor }}-${{ github.run_id }}.txt
                - name: commit result
                  run: |
                    git config --local user.email "action@github.com"
                    git config --local user.name "GitHub Action"
                    git add .
                    git commit -m "Add calculation result"
                    git pull --rebase
                    git push
              </code></pre>
              <p class="fragment"><a target="_blank" href="https://github.com/clinton3141/inconvenient-calculator/actions/workflows/push-calculator-bc.yml">Go</a></p>
          </section>
          <section>
            <h2>That's pretty annoying.</h2>
            <p class="fragment fade-in">But... let's really provoke the users by deleting their results</p>
          </section>
          <section>

            <pre class="yaml">
              <code data-line-numbers="|1-3|4-7|8-24|5-6|8,9,12-13|14-24|" data-trim data-noescape>
                name: Tidy Up
                permissions:
                  contents: write
                on:
                  schedule:
                    - cron: "*/5 * * * *"
                  workflow_dispatch:
                jobs:
                  tidy-up:
                    runs-on: ubuntu-latest
                    steps:
                      - name: Checkout repository
                        uses: actions/checkout@v4
                      - name: Delete files in results directory
                        run: |
                          if [ -n "$(ls results)" ]; then
                            git rm results/*.txt
                            git config --local user.email "action@github.com"
                            git config --local user.name "GitHub Action"
                            git commit -m "Tidy up results directory"
                            git pull --rebase
                            git push
                          fi
              </code></pre>
              <p class="fragment fade-in"><a target="_blank" href="https://github.com/clinton3141/inconvenient-calculator/actions/workflows/tidyup.yml">Go</a></p>
          </section>
        </section>
        <section>
          <section>
            <h2>Pretty cool. But can we make it worse?</h2>
          </section>
          <section>
            <h2>What if I told you we can't use numbers?</h2>
            <pre>
              <code class="language-klipse-js">
    ZERO = f => a => a
    SUCC = n => f => a => f(n(f)(a))
    ONE = SUCC(ZERO)
    </code>
            </pre>
            <aside class="notes">
              <p>Here's a note!</p>
            </aside>
          </section>

        </section>

        <section>
          <h2>Here's an editor with N predefined</h2>
          <script>
            const N = n => n(x => x + 1)(0)
          </script>
          <pre>
          <code class="language-klipse-js">
            ZERO = f => a => a
            ONE = f => a => f(a)
            N(f => a => a)
          </code>
          </pre>
        </section>

        <section>
          <h2>Here's some maths</h2>
          \[ \begin{align*} \dot{x} & = \sigma(y-x) \\ \dot{y} & = \rho x - y -
          xz \\ \dot{z} & = -\beta z + xy\end{align*} \]
        </section>
      </div>
    </div>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.0.5/reveal.min.js"
      integrity="sha512-qlilMzyzbFMKgbgaC4kDhZ7citDePYlfm/rwmek5uKg3xtu+dPdPW2MYob42jDfG0PV5DDHk4haWEJsQFn32xA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.0.5/plugin/notes/notes.min.js"
      integrity="sha512-/9WCotvRxf5+lapk+C+tbgcxOYAhQI0f0mX1QXzKeBsNzDH9LuvVFwJELQrh2fCJwtgXBtnnyB0N4Ynd3ucIzw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.0.5/plugin/math/math.min.js"
      integrity="sha512-skPZpuRwuUAnF9iEEFBXc4zJaucKcHUDgY1wDBTv0ILy82C2gn8MJsbcinzj2u8r/iZjD/78HRgw2/n//poOhQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.0.5/plugin/markdown/markdown.min.js"
      integrity="sha512-4exkEeyVuaWUFKozXl6L3UCugl6ai1cKnrVFkWUstdrNB2sDxxmPEaHBzTlYm9wX78EjPzEBG0s8k37oPeUFIw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.0.5/plugin/highlight/highlight.min.js"
      integrity="sha512-xkVKkN0o7xECTHSUZ9zdsBYRXiAKH7CZ3aICpW6aQJZsufVVRLhEBTDjTpC1tPzm+gNZiOeW174zXAB2fOLsTg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script>
      Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,
        slideNumber: 'c',
        rollingLinks: false,
        keyboard: true,
        mouseWheel: false,
        fragmentInURL: false,
        hashOneBasedIndex: false,
        pdfSeparateFragments: true,
        overview: true,
        width: 1400,
        height: 1000,
        minScale: 1.0,
        maxScale: 1.0,
        transition: 'convex',
        transitionSpeed: 'default',
        plugins: [
          RevealMarkdown,
          RevealNotes,
          RevealMath.KaTeX,
          RevealHighlight,
        ],
      });
    </script>
    <script src="https://storage.googleapis.com/app.klipse.tech/plugin/js/klipse_plugin.js"></script>
    <script>
      Reveal.addEventListener('slidechanged', function (event) {
        window.dispatchEvent(new Event('resize'));
      });
    </script>
  </body>
  undefined
</html>
